<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Neon Defender</title>
    <style>
        body { margin: 0; background: #020617; overflow: hidden; touch-action: none; font-family: sans-serif; }
        #ui { position: absolute; top: 10px; left: 10px; color: #22d3ee; font-size: 1.2rem; pointer-events: none; }
        canvas { display: block; }
    </style>
</head>
<body>
    <div id="ui">SKOR: <span id="s">0</span></div>
    <canvas id="c"></canvas>

    <script>
        const canvas = document.getElementById("c");
        const ctx = canvas.getContext("2d");
        const sEl = document.getElementById("s");

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let score = 0;
        let angle = 0;
        let bullets = [];
        let enemies = [];

        window.addEventListener("pointermove", e => {
            let dx = e.clientX - canvas.width/2;
            let dy = e.clientY - canvas.height/2;
            angle = Math.atan2(dy, dx);
        });

        // Otomatik Ateş
        setInterval(() => {
            bullets.push({ 
                x: canvas.width/2, 
                y: canvas.height/2, 
                vx: Math.cos(angle) * 7, 
                vy: Math.sin(angle) * 7 
            });
        }, 300);

        function spawnEnemy() {
            let side = Math.floor(Math.random() * 4);
            let x, y;
            if(side == 0) { x = Math.random()*canvas.width; y = -20; }
            else if(side == 1) { x = canvas.width+20; y = Math.random()*canvas.height; }
            else if(side == 2) { x = Math.random()*canvas.width; y = canvas.height+20; }
            else { x = -20; y = Math.random()*canvas.height; }
            
            enemies.push({ x, y, vx: (canvas.width/2 - x)/200, vy: (canvas.height/2 - y)/200 });
        }
        setInterval(spawnEnemy, 1000);

        function animate() {
            ctx.fillStyle = "rgba(2, 6, 23, 0.3)";
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Taret
            ctx.save();
            ctx.translate(canvas.width/2, canvas.height/2);
            ctx.rotate(angle);
            ctx.fillStyle = "#22d3ee";
            ctx.fillRect(0, -5, 30, 10);
            ctx.restore();

            bullets.forEach((b, i) => {
                b.x += b.vx; b.y += b.vy;
                ctx.fillStyle = "#f43f5e";
                ctx.beginPath(); ctx.arc(b.x, b.y, 4, 0, Math.PI*2); ctx.fill();
                if(b.x < 0 || b.x > canvas.width || b.y < 0 || b.y > canvas.height) bullets.splice(i, 1);
            });

            enemies.forEach((e, ei) => {
                e.x += e.vx; e.y += e.vy;
                ctx.fillStyle = "#fbbf24";
                ctx.beginPath(); ctx.arc(e.x, e.y, 10, 0, Math.PI*2); ctx.fill();

                // Mermi çarpışma
                bullets.forEach((b, bi) => {
                    let d = Math.hypot(e.x - b.x, e.y - b.y);
                    if(d < 14) {
                        enemies.splice(ei, 1);
                        bullets.splice(bi, 1);
                        score += 10;
                        sEl.innerText = score;
                    }
                });

                // Merkez çarpışma
                if(Math.hypot(e.x - canvas.width/2, e.y - canvas.height/2) < 20) {
                    alert("SAVUNMA ÇÖKTÜ! SKOR: " + score);
                    location.reload();
                }
            });

            requestAnimationFrame(animate);
        }
        animate();
    </script>
</body>
</html>